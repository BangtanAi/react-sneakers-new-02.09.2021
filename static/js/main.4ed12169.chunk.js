(this["webpackJsonpnew-react-snickers"]=this["webpackJsonpnew-react-snickers"]||[]).push([[0],{39:function(e,t,c){},69:function(e,t,c){"use strict";c.r(t);var r=c(0),a=c.n(r),n=c(31),s=c.n(n),i=(c(39),c(11)),o=c(12),d=c(8),j=c.n(d),l=c(13),u=c(4),b=c(5),h=c.n(b),m=a.a.createContext({}),x=c(1);var O=function(e){var t=e.image,c=e.title,r=e.description,n=a.a.useContext(m).setCartOpened;return Object(x.jsxs)("div",{className:"cart-empty",children:[Object(x.jsx)("img",{width:120,height:120,src:t,alt:"Empty cart",className:"cart-empty__img"}),Object(x.jsx)("h4",{children:c}),Object(x.jsx)("p",{children:r}),Object(x.jsxs)("button",{onClick:function(){return n(!1)},className:"greenButton",children:[Object(x.jsx)("img",{src:"/img/cart-empty.svg",alt:"Arrow"})," \u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430\u0437\u0430\u0434"]})]})},f=function(e){return new Promise((function(t){return setTimeout(t,e)}))};var v=function(e){var t=e.onClose,c=e.items,r=void 0===c?[]:c,n=e.onRemove,s=a.a.useState(!1),i=Object(u.a)(s,2),o=i[0],d=i[1],b=a.a.useState(null),v=Object(u.a)(b,2),p=v[0],g=v[1],k=a.a.useContext(m),N=k.cartItems,w=k.setCartItems,C=a.a.useState(!1),y=Object(u.a)(C,2),I=y[0],A=y[1],S=function(){var e=Object(l.a)(j.a.mark((function e(){var t,c,r,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,A(!0),e.next=4,h.a.post("https://60d9d1c65f7bf1001754778d.mockapi.io/orders",{items:N});case 4:t=e.sent,c=t.data,g(c.id),d(!0),w([]),r=0;case 10:if(!(r<N.length)){e.next=19;break}return a=N[r],e.next=14,h.a.delete("https://60d9d1c65f7bf1001754778d.mockapi.io/cart/"+a.id);case 14:return e.next=16,f(1e3);case 16:r++,e.next=10;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0437\u0430\u043a\u0430\u0437 :(");case 24:A(!1);case 25:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(){return e.apply(this,arguments)}}(),T=N.reduce((function(e,t){return t.price+e}),0);return Object(x.jsx)("div",{className:"overlay",children:Object(x.jsxs)("div",{className:"drawer",children:[Object(x.jsxs)("h3",{children:["\u041a\u043e\u0440\u0437\u0438\u043d\u0430"," ",Object(x.jsx)("img",{onClick:t,className:"remove-btn",src:"/img/remove.svg",alt:"Remove"})]}),r.length>0?Object(x.jsxs)("div",{className:"cart-filled",children:[Object(x.jsx)("div",{className:"items",children:r.map((function(e){return Object(x.jsxs)("div",{className:"cartItem",children:[Object(x.jsx)("img",{className:"cartItem-img",width:70,height:70,src:e.imageUrl,alt:"1"}),Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:e.title}),Object(x.jsxs)("b",{children:[e.price," \u0440\u0443\u0431."]})]}),Object(x.jsx)("img",{onClick:function(){return n(e.id)},className:"remove-btn",src:"/img/remove.svg",alt:"Remove"})]},e.id)}))}),Object(x.jsxs)("div",{className:"cartTotalBlock",children:[Object(x.jsxs)("ul",{children:[Object(x.jsxs)("li",{children:[Object(x.jsx)("span",{children:"\u0418\u0442\u043e\u0433\u043e: "}),Object(x.jsx)("div",{}),Object(x.jsxs)("b",{children:[T," \u0440\u0443\u0431. "]})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("span",{children:"\u041d\u0430\u043b\u043e\u0433 5%: "}),Object(x.jsx)("div",{}),Object(x.jsxs)("b",{children:[T/100*5," \u0440\u0443\u0431. "]})]})]}),Object(x.jsxs)("button",{onClick:S,disabled:I,className:"greenButton",children:["\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437 ",Object(x.jsx)("img",{src:"/img/arrow.svg",alt:"Arrow"})," "]})]})]}):Object(x.jsx)(O,{image:o?"/img/complete-order.jpg":"/img/cart-empty.png",title:o?"\u0417\u0430\u043a\u0430\u0437 \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d!":"\u041a\u043e\u0440\u0437\u0438\u043d\u0430 \u043f\u0443\u0441\u0442\u0430\u044f",description:o?"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 #".concat(p," \u0441\u043a\u043e\u0440\u043e \u0431\u0443\u0434\u0435\u0442 \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u043a\u0443\u0440\u044c\u0435\u0440\u0441\u043a\u043e\u0439 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0435"):"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u043d\u0443 \u043f\u0430\u0440\u0443 \u043a\u0440\u043e\u0441\u0441\u043e\u0432\u043e\u043a, \u0447\u0442\u043e\u0431\u044b \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0437\u0430\u043a\u0430\u0437."})]})})},p=c(15);var g=function(e){var t=a.a.useContext(m).cartItems.reduce((function(e,t){return t.price+e}),0);return Object(x.jsxs)("header",{children:[Object(x.jsx)(p.b,{to:"/",children:Object(x.jsxs)("div",{className:"headerLeft",children:[Object(x.jsx)("img",{width:40,height:40,src:"/img/logo.png",alt:"logo"}),Object(x.jsxs)("div",{className:"headerInfo",children:[Object(x.jsx)("h3",{children:"React Sneakers"}),Object(x.jsx)("p",{children:"\u041c\u0430\u0433\u0430\u0437\u0438\u043d \u043b\u0443\u0447\u0448\u0438\u0445 \u043a\u0440\u043e\u0441\u0441\u043e\u0432\u043e\u043a"})]})]})}),Object(x.jsxs)("ul",{className:"headerRight",children:[Object(x.jsxs)("li",{onClick:e.onClickCart,className:"headerRight-price",children:[Object(x.jsx)("img",{width:18,height:18,src:"/img/cart.svg",alt:"cart"}),Object(x.jsxs)("span",{children:[" ",t," \u0440\u0443\u0431."]})]}),Object(x.jsx)(p.b,{to:"/favorites",children:Object(x.jsx)("li",{children:Object(x.jsx)("img",{className:"headerRight-heart",width:18,height:18,src:"/img/favorite.svg",alt:"Heart"})})}),Object(x.jsx)(p.b,{to:"/orders",children:Object(x.jsx)("li",{children:Object(x.jsx)("img",{width:18,height:18,src:"/img/user.svg",alt:"user"})})})]})]})},k=c(34);var N=function(e){var t=e.id,c=e.title,r=e.price,n=e.imageUrl,s=e.onPlus,i=e.onAddFavorites,o=e.favorited,d=void 0!==o&&o,j=e.loading,l=void 0!==j&&j,b=a.a.useContext(m).isItemAdded,h=a.a.useState(d),O=Object(u.a)(h,2),f=O[0],v=O[1];return Object(x.jsx)("div",{className:"card",children:l?Object(x.jsxs)(k.a,{speed:2,width:150,height:220,viewBox:"0 0 150 220",backgroundColor:"#f3f3f3",foregroundColor:"#ecebeb",children:[Object(x.jsx)("rect",{x:"203",y:"237",rx:"0",ry:"0",width:"3",height:"3"}),Object(x.jsx)("rect",{x:"0",y:"0",rx:"10",ry:"10",width:"150",height:"91"}),Object(x.jsx)("rect",{x:"0",y:"117",rx:"3",ry:"3",width:"150",height:"15"}),Object(x.jsx)("rect",{x:"0",y:"137",rx:"3",ry:"3",width:"93",height:"15"}),Object(x.jsx)("rect",{x:"0",y:"175",rx:"7",ry:"7",width:"80",height:"24"}),Object(x.jsx)("rect",{x:"104",y:"168",rx:"8",ry:"8",width:"32",height:"32"})]}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"favourite",children:i&&Object(x.jsx)("img",{onClick:function(){i({id:t,parentId:t,title:c,price:r,imageUrl:n}),v(!f)},src:f?"/img/liked.svg":"/img/unliked.svg",alt:"Unliked"})}),Object(x.jsx)("img",{className:"card-img",width:133,height:112,src:n,alt:"1"}),Object(x.jsx)("h5",{children:c}),Object(x.jsxs)("div",{className:"card-descr",children:[Object(x.jsxs)("div",{className:"card-descr__price",children:[Object(x.jsx)("span",{children:"\u0426\u0435\u043d\u0430:"})," ",Object(x.jsx)("br",{}),Object(x.jsxs)("b",{children:[r," \u0440\u0443\u0431."]})]}),s&&Object(x.jsx)("img",{width:32,height:32,onClick:function(){s({id:t,parentId:t,title:c,price:r,imageUrl:n})},src:b(t)?"/img/btn-checked.svg":"/img/btn-plus.svg",alt:"Plus"})]})]})})};var w=function(e){var t=e.items,c=e.searchValue,a=e.onChangeSearchInput,n=e.setSearchValue,s=e.onAddToCart,d=e.onAddToFavorites,j=e.cartItems,l=e.isLoading;return Object(x.jsxs)("div",{className:"content",children:[Object(x.jsxs)("div",{className:"content-title",children:[Object(x.jsx)("h1",{children:c?'\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0443 "'.concat(c,'"'):"\u0412\u0441\u0435 \u043a\u0440\u043e\u0441\u0441\u043e\u0432\u043a\u0438"}),Object(x.jsxs)("div",{className:"search-block",children:[Object(x.jsx)("img",{src:"/img/search-logo.svg",alt:"Search-logo"}),Object(x.jsx)("input",{onChange:a,value:c,placeholder:"\u041f\u043e\u0438\u0441\u043a..."}),c&&Object(x.jsx)("img",{onClick:function(){return n("")},className:"remove-btn input-remove",src:"/img/remove.svg",alt:"Remove"})]})]}),Object(x.jsx)("div",{className:"sneakers",children:function(){var e=t.filter((function(e){return e.title.toLowerCase().includes(c.toLowerCase())}));return(l?Object(o.a)(Array(12)):e).map((function(e,t){return Object(r.createElement)(N,Object(i.a)(Object(i.a)({},e),{},{key:t,onPlus:function(e){return s(e)},onAddFavorites:function(t){return d(e)},added:j.some((function(t){return Number(t.id)===Number(e.id)})),loading:l}))}))}()})]})},C=c(2);var y=function(e){var t=e.onAddToCart,c=e.onAddToFavorites,n=a.a.useContext(m).favorites;return Object(x.jsxs)("div",{className:"content",children:[Object(x.jsx)("div",{className:"content-title",children:Object(x.jsx)("h1",{children:"\u041c\u043e\u0438 \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438"})}),Object(x.jsx)("div",{className:"sneakers",children:n.map((function(e,a){return Object(r.createElement)(N,Object(i.a)(Object(i.a)({},e),{},{key:a,onPlus:function(c){return t(e)},favorited:!0,onAddFavorites:c}))}))})]})};var I=function(){var e=a.a.useState([]),t=Object(u.a)(e,2),c=t[0],n=t[1],s=a.a.useState(!0),d=Object(u.a)(s,2),b=d[0],m=d[1];return a.a.useEffect((function(){Object(l.a)(j.a.mark((function e(){var t,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get("https://60d9d1c65f7bf1001754778d.mockapi.io/orders");case 3:t=e.sent,c=t.data,n(c.reduce((function(e,t){return[].concat(Object(o.a)(e),Object(o.a)(t.items))}),[])),m(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u0435 \u0437\u0430\u043a\u0430\u0437\u043e\u0432");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()}),[]),Object(x.jsxs)("div",{className:"content",children:[Object(x.jsx)("div",{className:"content-title",children:Object(x.jsx)("h1",{children:"\u041c\u043e\u0438 \u0437\u0430\u043a\u0430\u0437\u044b"})}),Object(x.jsx)("div",{className:"sneakers",children:(b?Object(o.a)(Array(12)):c).map((function(e,t){return Object(r.createElement)(N,Object(i.a)(Object(i.a)({},e),{},{key:t,loading:b}))}))})]})};var A=function(){var e=a.a.useState(!1),t=Object(u.a)(e,2),c=t[0],r=t[1],n=a.a.useState([]),s=Object(u.a)(n,2),d=s[0],b=s[1],O=a.a.useState([]),f=Object(u.a)(O,2),p=f[0],k=f[1],N=a.a.useState(""),A=Object(u.a)(N,2),S=A[0],T=A[1],F=a.a.useState([]),R=Object(u.a)(F,2),E=R[0],P=R[1],B=a.a.useState(!0),L=Object(u.a)(B,2),U=L[0],V=L[1];a.a.useEffect((function(){function e(){return(e=Object(l.a)(j.a.mark((function e(){var t,c,r,a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=Promise,e.t1=h.a.get("https://60d9d1c65f7bf1001754778d.mockapi.io/cart"),e.t2=h.a.get("https://60d9d1c65f7bf1001754778d.mockapi.io/favorites"),e.next=6,h.a.get("https://60d9d1c65f7bf1001754778d.mockapi.io/items");case 6:return e.t3=e.sent,e.t4=[e.t1,e.t2,e.t3],e.next=10,e.t0.all.call(e.t0,e.t4);case 10:t=e.sent,c=Object(u.a)(t,3),r=c[0],a=c[1],n=c[2],V(!1),k(r.data),P(a.data),b(n.data),e.next=25;break;case 21:e.prev=21,e.t5=e.catch(0),alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u0435 \u0434\u0430\u043d\u043d\u044b\u0445"),console.error(e.t5);case 25:case"end":return e.stop()}}),e,null,[[0,21]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var _=function(){var e=Object(l.a)(j.a.mark((function e(t){var c,r,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(c=p.find((function(e){return Number(e.parentId)===Number(t.id)})))){e.next=8;break}return k((function(e){return e.filter((function(e){return Number(e.parentId)!==Number(t.id)}))})),e.next=6,h.a.delete("https://60d9d1c65f7bf1001754778d.mockapi.io/cart/".concat(c.id));case 6:e.next=14;break;case 8:return k((function(e){return[].concat(Object(o.a)(e),[t])})),e.next=11,h.a.post("https://60d9d1c65f7bf1001754778d.mockapi.io/cart",t);case 11:r=e.sent,a=r.data,k((function(e){return e.map((function(e){return e.parentId===a.parentId?Object(i.a)(Object(i.a)({},e),{},{id:a.id}):e}))}));case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"),console.error(e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(l.a)(j.a.mark((function e(t){var c,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!E.find((function(e){return e.id===t.id}))){e.next=5;break}h.a.delete("https://60d9d1c65f7bf1001754778d.mockapi.io/favorites/".concat(t.id)),e.next=10;break;case 5:return e.next=7,h.a.post("https://60d9d1c65f7bf1001754778d.mockapi.io/favorites",t);case 7:c=e.sent,r=c.data,P((function(e){return[].concat(Object(o.a)(e),[r])}));case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438"),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsx)(m.Provider,{value:{items:d,cartItems:p,favorites:E,isItemAdded:function(e){return p.some((function(t){return Number(t.parentId)===Number(e)}))},onAddToCart:_,onAddToFavorites:J,setCartOpened:r,setCartItems:k},children:Object(x.jsxs)("div",{className:"wrapper clear",children:[c&&Object(x.jsx)(v,{items:p,onClose:function(){return r(!1)},onRemove:function(e){try{h.a.delete("https://60d9d1c65f7bf1001754778d.mockapi.io/cart/".concat(e)),k((function(t){return t.filter((function(t){return Number(t.id)!==Number(e)}))}))}catch(t){alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u0438\u0437 \u043a\u043e\u0440\u0437\u0438\u043d\u044b"),console.error(t)}}}),Object(x.jsx)(g,{onClickCart:function(){return r(!0)}}),Object(x.jsx)(C.a,{path:"/",exact:!0,children:Object(x.jsx)(w,{items:d,searchValue:S,onAddToCart:_,onAddToFavorites:J,onChangeSearchInput:function(e){T(e.target.value)},setSearchValue:T,cartItems:p,isLoading:U})}),Object(x.jsx)(C.a,{path:"/favorites",exact:!0,children:Object(x.jsx)(y,{onAddToCart:_,onAddToFavorites:J})}),Object(x.jsx)(C.a,{path:"/orders",exact:!0,children:Object(x.jsx)(I,{})})]})})};s.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(p.a,{children:Object(x.jsx)(A,{})})}),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.4ed12169.chunk.js.map